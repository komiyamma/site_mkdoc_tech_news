# サイト構成の問題点

このサイトの構成には、主にメタデータ（タイトル、説明文など）の管理方法に起因するいくつかの問題が存在します。
Windows依存については、ご要望の通り問題点から除外しています。

## 問題1: メタデータ管理の複雑化

ページのタイトルと説明（description）を取得するためのロジックが、複数のカスタムコンポーネント（`plugins/title_from_filename.py`, `plugins/description_from_memo.py`, `macros/home.py`）に分散しており、非常に複雑になっています。

- **信頼できる唯一の情報源（Single Source of Truth）の欠如**:
  - メタデータが、ファイル名、Markdownのh1見出し、YAMLフロントマター、そして`.memo`ファイルと、様々な場所から取得される可能性があります。
  - これにより、どの情報が最終的にページに反映されるのかを予測することが困難になっています。

## 問題2: `.memo` ファイルの不適切な使用

`.memo`ファイルは、本来の意図とは異なる、あるいは一貫性のない方法で利用されています。

- **役割の衝突**:
  - `macros/home.py`は、`.memo`ファイルの**1行目をタイトル、2行目以降を説明**として解釈します。
  - 一方で、`plugins/description_from_memo.py`は、`.memo`ファイルの**全体を説明**として解釈します。
  - これら2つのコンポーネント間で`.memo`ファイルの役割についての解釈が矛盾しており、システムの振る舞いを混乱させる原因となっています。

- **壊れやすい設計**:
  - 「1行目がタイトル」というルールは、ファイルの先頭に空行が意図せず入ってしまうだけでタイトルが消失するなど、非常に壊れやすい設計です。

## 問題3: 処理の冗長性

メタデータを抽出・加工するという類似の処理が、複数のプラグインとマクロで重複して実行されています。

- `on_page_markdown` イベントで各ページに対してプラグインが実行された後、さらにホームページ表示のためにマクロが全ページを再度スキャンしており、非効率です。
- これはビルドパフォーマンスの低下につながる可能性があります。

## 問題4: 保守性の低さ

上記の問題点の結果として、サイト全体の保守性が著しく低下しています。

- ロジックが複数のファイルに分散し、互いに影響しあっているため、一部の挙動（例：タイトルの付け方）を変更したい場合に、どのファイルを修正すればよいのか判断するのが困難です。
- 将来的な機能追加やMkDocsのバージョンアップへの追従が難しい状態になっています。

## 推奨事項

可能であれば、メタデータ管理の仕組みをシンプルにすることを推奨します。

- **メタデータの集約**: ページのタイトルや説明は、各MarkdownファイルのYAMLフロントマターに一元的に記述するのが理想的です。
- **ロジックの統合**: 現在複数のプラグインやマクロに分散しているメタデータ処理ロジックを、単一のプラグインに統合することで、見通しが良くなり、保守性も向上します。
- **`.memo`ファイルの役割の再定義**: `.memo`ファイルを使うのであれば、その役割を一つ（例えば「説明文専用」など）に定め、すべてのコンポーネントでそのルールを共有すべきです。
