# ç¬¬22ç« ã€€ã‚¨ãƒ©ãƒ¼è¨­è¨ˆâ‘ ï¼šåˆ†ã‹ã‚Šã‚„ã™ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã™ã‚‹ğŸ«¶ğŸ§¯

ã“ã®ç« ã¯ã€Œã‚¨ãƒ©ãƒ¼ã®å‡ºã—æ–¹ã€ã‚’ **â€œãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å„ªã—ã„è¨€è‘‰â€ ã¨ â€œé–‹ç™ºã«å½¹ç«‹ã¤æƒ…å ±â€ ã«åˆ†ã‘ã¦è¨­è¨ˆã™ã‚‹** å›ã ã‚ˆã€œğŸ™‚âœ¨
ã‚¨ãƒ©ãƒ¼ã£ã¦ã€å®Ÿã¯ **ä»•æ§˜ã®ä¸€éƒ¨** ãªã‚“ã ã‚ˆã­ğŸ’¡ï¼ˆé›‘ã ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚‚é–‹ç™ºè€…ã‚‚ã¤ã‚‰ã„ğŸ˜µâ€ğŸ’«ï¼‰

â€»ã“ã®ç« ã®å†…å®¹ã¯ã€æœ€è¿‘ã®å®Ÿå‹™ãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆTypeScript 5.9ç³»ã€Problem Details / RFC 9457ã€Zod v4 ãªã©ï¼‰ã‚‚è¸ã¾ãˆã¦çµ„ã¿ç«‹ã¦ã¦ã‚‹ã‚ˆğŸ§ âœ¨ ([GitHub][1])

---

## 22.0 ã“ã®ç« ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ğŸ¯âœ¨

* ã€Œåˆ†ã‹ã‚Šã«ãã„ã‚¨ãƒ©ãƒ¼ã€ã‚’ã€Œç›´ã›ã‚‹ã‚¨ãƒ©ãƒ¼ã€ã«è¨€ã„æ›ãˆã§ãã‚‹âœï¸ğŸ˜Š
* **è¡¨ç¤ºç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸** ã¨ **ãƒ­ã‚°ç”¨æƒ…å ±** ã‚’åˆ†é›¢ã—ã¦è¨­è¨ˆã§ãã‚‹ğŸ—‚ï¸ğŸ”
* å…¥åŠ›ã‚¨ãƒ©ãƒ¼ã‚’ **â€œã©ã“ãŒ/ãªãœ/ã©ã†ç›´ã™â€** ã§è¿”ã›ã‚‹ã‚ˆã†ã«ãªã‚‹ğŸ«¶âœ…
* APIãªã‚‰ **RFC 9457ï¼ˆProblem Detailsï¼‰** ã£ã½ã„å½¢ã§è¿”ã™è¨­è¨ˆãŒã‚ã‹ã‚‹ğŸ“¦ğŸŒ ([datatracker.ietf.org][2])

---

## 22.1 ãã‚‚ãã‚‚ã€Œè‰¯ã„ã‚¨ãƒ©ãƒ¼ã€ã£ã¦ãªã«ï¼ŸğŸ¤”âœ¨

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå›°ã‚‹ã‚¨ãƒ©ãƒ¼ã®å…¸å‹ã¯ã“ã‚ŒğŸ‘‡ğŸ˜‡

* ã€Œã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€â†’ ãˆã€ä½•ã‚’ã™ã‚Œã°â€¦ï¼ŸğŸ˜‡
* ã€ŒInvalid requestã€â†’ ã©ã®é …ç›®ãŒï¼ŸğŸ˜‡
* ã€Œ500ã€â†’ ã„ã‚„ã€ç§ã¯ä½•ã‚’â€¦ğŸ˜‡

â€œè‰¯ã„ã‚¨ãƒ©ãƒ¼â€ ã¯ã€ã–ã£ãã‚Š **ã“ã®3ç‚¹ã‚»ãƒƒãƒˆ** ãŒå…¥ã£ã¦ã‚‹ã®ãŒå¼·ã„ğŸ’ªâœ¨

1. **ã‚„ã•ã—ã„è¨€è‘‰**ï¼ˆå°‚é–€ç”¨èªãƒ»è¬ã‚³ãƒ¼ãƒ‰ã‚’å‡ºã—ã™ããªã„ï¼‰
2. **å•é¡ŒãŒãƒãƒƒã‚­ãƒª**ï¼ˆã©ã“ãŒ/ä½•ãŒãƒ€ãƒ¡ï¼‰
3. **è§£æ±ºã®é“**ï¼ˆã©ã†ç›´ã›ã°ã„ã„ï¼‰

ã“ã‚Œã¯UXã®å®šç•ªæŒ‡é‡ã¨ã—ã¦ã‚‚æœ‰åã ã‚ˆğŸ«¶ ([Nielsen Norman Group][3])

---

## 22.2 ã‚¨ãƒ©ãƒ¼ã¯ã€Œ2ç¨®é¡ã€ã‚ã‚‹ã¨æ€ã†ã¨ä¸€æ°—ã«æ¥½ã«ãªã‚‹ğŸª„ğŸ—‚ï¸

ã“ã“è¶…é‡è¦ã€œï¼ğŸ’¡

### A. è¡¨ç¤ºç”¨ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ï¼‰ğŸ«¶

* ä¸å¯§ãƒ»çŸ­ã„ãƒ»æ¬¡ã®è¡Œå‹•ãŒã‚ã‹ã‚‹
* ä¾‹ï¼š

  * ã€Œãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ãŒé•ã†ã¿ãŸã„ğŸ™ ä¾‹ï¼š[name@example.com](mailto:name@example.com)ã€
  * ã€Œãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã«ã—ã¦ã­ğŸ”ã€

### B. å†…éƒ¨ç”¨ï¼ˆãƒ­ã‚°/èª¿æŸ»å‘ã‘ï¼‰ğŸ”

* é–‹ç™ºè€…ãŒåŸå› ã‚’è¿½ãˆã‚‹æƒ…å ±
* ä¾‹ï¼š

  * ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã€ã©ã®ãƒ¬ã‚¤ãƒ¤ã§å¤±æ•—ã—ãŸã‹ã€stackã€traceIdã€å…¥åŠ›ã®è¦ç´„â€¦ãªã©

**åŒã˜å¤±æ•—ã§ã‚‚ã€Aã¨Bã¯ â€œå‡ºã™å†…å®¹ãŒé•ã†â€** ã®ãŒè‡ªç„¶ãªã‚“ã ã‚ˆã­ğŸ™‚âœ¨
ï¼ˆAã«å†…éƒ¨æƒ…å ±ã‚’æ··ãœã‚‹ã¨ã€æ€–ã„ï¼†èª­ã‚ãªã„ï¼†ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£çš„ã«ã‚‚å±ãªã„ğŸ˜±ğŸ”’ï¼‰

---

## 22.3 ã€Œè¨€ã„æ–¹ã€ã®é‰„æ¿ãƒ«ãƒ¼ãƒ«ğŸ«¶ğŸ“Œ

### ãƒ«ãƒ¼ãƒ«1ï¼šè²¬ã‚ãªã„ãƒ»æ€–ãŒã‚‰ã›ãªã„ğŸ˜–â¡ï¸ğŸ™‚

Windowsç³»ã®æ–‡ç« ã‚¬ã‚¤ãƒ‰ã§ã‚‚ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã›ã„ã£ã½ãæ›¸ã‹ãªã„ã€ãŒå¤§äº‹ã£ã¦è¨€ã‚ã‚Œã¦ã‚‹ã‚ˆğŸ«¶ ([Microsoft Learn][4])

* âŒã€Œã‚ãªãŸã®å…¥åŠ›ãŒé–“é•ã£ã¦ã„ã¾ã™ã€
* âœ…ã€Œã“ã®é …ç›®ã¯ â€œæ•°å­—ã ã‘â€ ã§å…¥åŠ›ã—ã¦ã­ğŸ™‚ã€

### ãƒ«ãƒ¼ãƒ«2ï¼šçŸ­ãã€å…·ä½“çš„ã«ğŸ¯

* âŒã€Œå…¥åŠ›å†…å®¹ãŒä¸æ­£ã§ã™ã€
* âœ…ã€Œå¹´é½¢ã¯0ã€œ120ã®ç¯„å›²ã§å…¥åŠ›ã—ã¦ã­ğŸ‚ã€

### ãƒ«ãƒ¼ãƒ«3ï¼šã€Œæ¬¡ã«ä½•ã‚’ã™ã‚Œã°ã„ã„ã‹ã€ã‚’å…¥ã‚Œã‚‹ğŸ§­âœ¨

* âœ…ã€Œã‚‚ã†ä¸€åº¦é€ä¿¡ã—ã¦ã­ã€
* âœ…ã€Œå½¢å¼ã‚’ç¢ºèªã—ã¦ã­ï¼ˆä¾‹ã‚ã‚Šï¼‰ã€
* âœ…ã€Œæ™‚é–“ã‚’ãŠã„ã¦è©¦ã—ã¦ã­ã€
* âœ…ã€Œã‚µãƒãƒ¼ãƒˆã«é€£çµ¡ã™ã‚‹ãªã‚‰ã“ã®ç•ªå·ã‚’ä¼ãˆã¦ã­ï¼ˆå•ã„åˆã‚ã›IDï¼‰ã€

Googleã®æŠ€è¡“æ–‡æ›¸ã‚¬ã‚¤ãƒ‰ã§ã‚‚ã€èª­ã¿ã‚„ã™ã„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ›¸ãæ–¹ãŒæ•´ç†ã•ã‚Œã¦ã‚‹ã‚ˆğŸ“šâœ¨ ([Google for Developers][5])

---

## 22.4 ã¾ãš â€œã‚¨ãƒ©ãƒ¼ã®åˆ†é¡â€ ã‚’æ±ºã‚ã‚‹ã¨è¨­è¨ˆãŒãƒ©ã‚¯ğŸ˜†ğŸ§©

ãŠã™ã™ã‚ã¯ã“ã®4åˆ†é¡ğŸ‘‡ï¼ˆè¿·ã£ãŸã‚‰ã“ã‚Œã§OKï¼ï¼‰

1. **å…¥åŠ›ã‚¨ãƒ©ãƒ¼ï¼ˆValidationï¼‰** âœï¸

   * ä¾‹ï¼šå¿…é ˆã€å½¢å¼ã€ç¯„å›²ã€æ¡æ•°
2. **ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼ï¼ˆä¸å¤‰æ¡ä»¶é•åï¼‰** ğŸ’

   * ä¾‹ï¼šã€Œåœ¨åº«0æœªæº€ã¯ãƒ€ãƒ¡ã€ã€Œæ”¯æ‰•ã„æ¸ˆã¿ã«æˆ»ã›ãªã„ã€
3. **æ¨©é™/èªå¯ã‚¨ãƒ©ãƒ¼** ğŸ”‘

   * ä¾‹ï¼šã€Œç®¡ç†è€…ã ã‘å¯èƒ½ã€
4. **ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼** âš ï¸

   * ä¾‹ï¼šé€šä¿¡å¤±æ•—ã€DBéšœå®³ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

ğŸ‘‰ ã“ã®ç« ï¼ˆç¬¬22ç« ï¼‰ã¯ç‰¹ã« **1ã¨2ã‚’ â€œã‚ã‹ã‚Šã‚„ã™ã„è¨€è‘‰â€ ã«ã™ã‚‹** ã®ãŒä¸»å½¹ã ã‚ˆğŸ«¶âœ¨

---

## 22.5 UIã§ã®å‡ºã—æ–¹ã®ã‚³ãƒ„ï¼ˆã„ã¤ãƒ»ã©ã“ã«å‡ºã™ï¼Ÿï¼‰ğŸ§ğŸ§­

ãƒ•ã‚©ãƒ¼ãƒ å‘¨ã‚Šã®é‰„æ¿ğŸ‘‡ï¼ˆMaterial Designã§ã‚‚è¿‘ã„è€ƒãˆæ–¹ã ã‚ˆï¼‰ ([Material Design][6])

* **åŸºæœ¬ã¯é …ç›®ã®è¿‘ã**ï¼šã©ã“ãŒæ‚ªã„ã‹ä¸€ç¬ã§ã‚ã‹ã‚‹ğŸ‘€âœ¨
* **å…¥åŠ›ã—ã¦ãªã„ã®ã«æ€’ã‚‰ãªã„**ï¼šè§¦ã£ã¦ã‹ã‚‰å‡ºã™ï¼ˆã„ããªã‚Šèµ¤ã¯ãƒ“ãƒ“ã‚‹ğŸ˜±ï¼‰
* **é€ä¿¡æ™‚ã«ã¾ã¨ã‚ã¦å‡ºã™**ï¼šæœªå…¥åŠ›ãŒå¤šã„æ™‚ã¯ä¸Šéƒ¨ã«è¦ç´„ï¼‹å„é …ç›®ã«ã‚‚è¡¨ç¤ºğŸ§¾
* **ä¿®æ­£ã—ãŸã‚‰æ¶ˆãˆã‚‹**ï¼šç›´ã—ãŸã®ã«æ®‹ã‚‹ã¨æ··ä¹±ğŸŒ€

---

## 22.6 å®Ÿè£…ã®å½¢ï¼šã‚¨ãƒ©ãƒ¼ã¯ã€Œæ§‹é€ åŒ–ã€ã—ã¦æŒã¤ğŸ“¦âœ¨

â€œæ–‡å­—åˆ—ã ã‘â€ ã§æŒã¤ã¨å¾Œã§è©°ã‚€ğŸ˜‡
ãŠã™ã™ã‚ã¯ **ã‚³ãƒ¼ãƒ‰ï¼‹å ´æ‰€ï¼‹è¡¨ç¤ºç”¨ã®ææ–™** ã‚’æŒã¤ã“ã¨ï¼

### ä¾‹ï¼šãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼å‹ï¼ˆUnionï¼‰ğŸ·ï¸ğŸ§ 

```ts
// ã©ã®VO/ãƒ«ãƒ¼ãƒ«ã§è½ã¡ãŸã‹ã‚’ â€œå‹â€ ã§æŒã¤ã‚¤ãƒ¡ãƒ¼ã‚¸
export type DomainError =
  | { kind: "EmailInvalid"; input: string }
  | { kind: "PasswordTooShort"; min: number }
  | { kind: "AgeOutOfRange"; min: number; max: number; input: number }
  | { kind: "InventoryWouldBeNegative"; current: number; requested: number };

// UIè¡¨ç¤ºå‘ã‘ã®å¤‰æ›ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¦‹ã›ã‚‹ã®ã¯ã“ã“ï¼ï¼‰
export function toUserMessage(e: DomainError): string {
  switch (e.kind) {
    case "EmailInvalid":
      return "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ãŒé•ã†ã¿ãŸã„ğŸ™ ä¾‹ï¼šname@example.com";
    case "PasswordTooShort":
      return `ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯${e.min}æ–‡å­—ä»¥ä¸Šã«ã—ã¦ã­ğŸ”`;
    case "AgeOutOfRange":
      return `å¹´é½¢ã¯${e.min}ã€œ${e.max}ã®ç¯„å›²ã§å…¥åŠ›ã—ã¦ã­ğŸ‚`;
    case "InventoryWouldBeNegative":
      return "åœ¨åº«ãŒè¶³ã‚Šãªã„ã¿ãŸã„ğŸ“¦ğŸ’¦ æ•°é‡ã‚’æ¸›ã‚‰ã—ã¦ã­";
  }
}
```

ãƒã‚¤ãƒ³ãƒˆã¯ã“ã‚ŒğŸ‘‡ğŸ™‚âœ¨

* **ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã®ã‚¨ãƒ©ãƒ¼ã¯ã€è¡¨ç¤ºæ–‡ç« ã‚’ç›´æ¥æŒãŸãªã„**ï¼ˆç¿»è¨³ãƒ»æ–‡è¨€å¤‰æ›´ãŒã¤ã‚‰ã„ï¼‰
* è¡¨ç¤ºæ–‡ç« ã¯ **UIå¯„ã‚Šã®å ´æ‰€** ã§ä½œã‚‹ï¼ˆ= ä»Šå›ã®ç« ã®ãƒ†ãƒ¼ãƒï¼ï¼‰ğŸ«¶

---

## 22.7 ã€Œé …ç›®ã”ã¨ã‚¨ãƒ©ãƒ¼ã€ã‚’ä½œã‚‹ã¨ã€ã‚ã¡ã‚ƒè¦ªåˆ‡ã«ãªã‚‹ğŸ«¶ğŸ“Œ

å…¥åŠ›ç”»é¢ã ã¨ã€ã“ã‚“ãªå½¢ãŒæ°—æŒã¡ã„ã„ã‚ˆğŸ‘‡

```ts
export type FieldError = {
  field: "email" | "password" | "age";
  message: string;        // è¡¨ç¤ºç”¨ï¼ˆã‚„ã•ã—ã„ï¼‰
};

export type FormErrorSummary = {
  title: string;          // ä¸Šã«å‡ºã™è¦ç´„
  fieldErrors: FieldError[];
};
```

ãŸã¨ãˆã°ã€Œç™»éŒ²ã§ããªã„ã€ã‚’ã“ã†è¿”ã™ğŸ‘‡

* ä¸Šï¼š`å…¥åŠ›ã«å•é¡ŒãŒã‚ã‚‹ã¿ãŸã„ğŸ™ èµ¤ã„ã¨ã“ã‚ã‚’ç›´ã—ã¦ã­`
* è¿‘ãï¼š`ãƒ¡ãƒ¼ãƒ«å½¢å¼ãŒé•ã†ã‚ˆ` / `8æ–‡å­—ä»¥ä¸Šã ã‚ˆ` ã¿ãŸã„ã«ãƒ”ãƒ³ãƒã‚¤ãƒ³ãƒˆğŸ¯âœ¨

---

## 22.8 APIãªã‚‰ï¼šRFC 9457ï¼ˆProblem Detailsï¼‰ã§è¿”ã™ã®ãŒä»Šã©ãğŸ“¦ğŸŒâœ¨

HTTP APIã®ã‚¨ãƒ©ãƒ¼å½¢å¼ã‚’æ¨™æº–åŒ–ã™ã‚‹ä»•æ§˜ãŒ **RFC 9457**ï¼ˆRFC 7807ã‚’ç½®ãæ›ãˆï¼‰ã ã‚ˆã€œï¼ ([datatracker.ietf.org][2])
Content-Type ã¯ `application/problem+json` ã‚’ä½¿ã†ã®ãŒå®šç•ªğŸ§¾âœ¨ ([Qiita][7])

### ä¾‹ï¼ˆã–ã£ãã‚Šï¼‰

```json
{
  "type": "https://example.com/problems/validation-error",
  "title": "å…¥åŠ›ã«å•é¡ŒãŒã‚ã‚Šã¾ã™",
  "status": 400,
  "detail": "ã„ãã¤ã‹ã®é …ç›®ã‚’ç¢ºèªã—ã¦ãã ã•ã„",
  "instance": "/signup",
  "errors": [
    { "field": "email", "message": "ãƒ¡ãƒ¼ãƒ«å½¢å¼ãŒé•ã†ã¿ãŸã„ğŸ™" },
    { "field": "password", "message": "8æ–‡å­—ä»¥ä¸Šã«ã—ã¦ã­ğŸ”" }
  ],
  "traceId": "01J...ï¼ˆãƒ­ã‚°çªåˆç”¨ï¼‰"
}
```

* `errors` ã‚„ `traceId` ã¯ **æ‹¡å¼µãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰** ã¨ã—ã¦è¶³ã—ã¦OKï¼ˆå®Ÿå‹™ã§ã‚ˆãã‚„ã‚‹ï¼‰ğŸ™‚âœ¨ ([Qiita][7])
* ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯ `traceId` ã‚’ã€Œå•ã„åˆã‚ã›ç”¨ç•ªå·ã€ã¨ã—ã¦è¦‹ã›ã‚‹ã¨å„ªã—ã„ğŸ“ğŸ«¶ï¼ˆãƒ­ã‚°å´ã§ã‚‚æ¤œç´¢ã§ãã¦æœ€é«˜ï¼‰

---

## 22.9 Zodï¼ˆã‚¹ã‚­ãƒ¼ãƒï¼‰â†’ é …ç›®ã‚¨ãƒ©ãƒ¼ã¸ã®å¤‰æ›ä¾‹ğŸ§ªâ¡ï¸ğŸ«¶

ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯æœ€è¿‘ã ã¨ **Zod v4** ãŒå®‰å®šç‰ˆã§ã€npmã®æœ€æ–°ã¯ **4.3.5ï¼ˆ2026-01-04æ™‚ç‚¹ï¼‰** ã«ãªã£ã¦ã‚‹ã‚ˆğŸ“¦âœ¨ ([NPM][8])

Zodã®ã‚¨ãƒ©ãƒ¼ã‚’ â€œé …ç›®ã‚¨ãƒ©ãƒ¼â€ ã«æ•´å½¢ã™ã‚‹æ„Ÿã˜ğŸ‘‡

```ts
import { z } from "zod";

const SignupSchema = z.object({
  email: z.string().email(),
  password: z.string().min(8),
  age: z.coerce.number().int().min(0).max(120),
});

export function validateSignup(input: unknown) {
  const r = SignupSchema.safeParse(input);
  if (r.success) return { ok: true as const, value: r.data };

  const fieldErrors = r.error.issues.map((iss) => ({
    field: iss.path[0] as "email" | "password" | "age",
    message: issueToMessage(iss),
  }));

  return {
    ok: false as const,
    value: {
      title: "å…¥åŠ›ã«å•é¡ŒãŒã‚ã‚‹ã¿ãŸã„ğŸ™ èµ¤ã„ã¨ã“ã‚ã‚’ç›´ã—ã¦ã­",
      fieldErrors,
    },
  };
}

function issueToMessage(iss: z.ZodIssue): string {
  // ã“ã“ã§ â€œåˆå¿ƒè€…ã«åˆ†ã‹ã‚‹è¨€è‘‰â€ ã«ã™ã‚‹ã®ãŒç¬¬22ç« ã®è…•ã®è¦‹ã›æ‰€ğŸ«¶âœ¨
  if (iss.path[0] === "email") return "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ãŒé•ã†ã¿ãŸã„ğŸ™ ä¾‹ï¼šname@example.com";
  if (iss.path[0] === "password") return "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã«ã—ã¦ã­ğŸ”";
  if (iss.path[0] === "age") return "å¹´é½¢ã¯0ã€œ120ã®ç¯„å›²ã§å…¥åŠ›ã—ã¦ã­ğŸ‚";
  return "å…¥åŠ›ã‚’ç¢ºèªã—ã¦ã­ğŸ™";
}
```

---

## 22.10 ãƒŸãƒ‹èª²é¡Œï¼ˆæ‰‹ã‚’å‹•ã‹ãã€œï¼ï¼‰ğŸ§ªâœï¸âœ¨

### èª²é¡Œ1ï¼šæ‚ªã„æ–‡è¨€ã‚’ç›´ã™ğŸ™‚â¡ï¸ğŸ˜

æ¬¡ã®æ–‡è¨€ã‚’ã€**â€œã©ã“ãŒ/ãªãœ/ã©ã†ç›´ã™â€** ã«ã—ã¦ã­ğŸ«¶

* ã€Œä¸æ­£ãªå€¤ã§ã™ã€
* ã€Œç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸã€
* ã€Œå…¥åŠ›ãŒé–“é•ã£ã¦ã„ã¾ã™ã€

### èª²é¡Œ2ï¼šè¡¨ç¤ºç”¨ã¨ãƒ­ã‚°ç”¨ã‚’åˆ†ã‘ã‚‹ğŸ—‚ï¸ğŸ”

* è¡¨ç¤ºï¼šçŸ­ã„ãƒ»å„ªã—ã„ãƒ»ç›´ã—æ–¹ãŒã‚ã‹ã‚‹
* ãƒ­ã‚°ï¼škindã€pathã€å…¥åŠ›ã®è¦ç´„ã€traceId ãªã©ï¼ˆãŸã ã—å€‹äººæƒ…å ±ã¯æ‰±ã„æ³¨æ„âš ï¸ï¼‰

### èª²é¡Œ3ï¼šé …ç›®ã‚¨ãƒ©ãƒ¼ã‚’3ã¤ä½œã‚‹ğŸ¯

* email / password / age ã®ã©ã‚Œã‹ã§è½ã¨ã—ã¦
* ç”»é¢ã®è¿‘ãã«å‡ºã™æ–‡ç« ã‚’ä½œã‚‹ğŸ«¶âœ¨

---

## 22.11 AIæ´»ç”¨ã‚³ãƒ¼ãƒŠãƒ¼ï¼ˆã“ã®ç« ã¨ç›¸æ€§ã„ã„ï¼ï¼‰ğŸ¤–ğŸ’

AIã¯ **ã€Œæ–‡è¨€ã®æ”¹å–„ã€ã€Œè¨€ã„æ›ãˆã€ã€Œä¸è¶³è¦³ç‚¹ã®æ´—ã„å‡ºã—ã€** ãŒå¾—æ„ã ã‚ˆã€œï¼âœ¨
ãŠã™ã™ã‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆğŸ‘‡

* ã€Œã“ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã€åˆå¿ƒè€…ã«å„ªã—ãçŸ­ãç›´ã—ã¦ã€‚åŸå› ã¨ç›´ã—æ–¹ã‚‚å…¥ã‚Œã¦ã€ğŸ«¶
* ã€Œå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹ã‚’ã€email/password/age ã§10å€‹ãšã¤å‡ºã—ã¦ã€ğŸ§ 
* ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è²¬ã‚ãªã„è¨€ã„å›ã—ã«ã—ã¦ã€‚ãƒˆãƒ¼ãƒ³ã¯æ˜ã‚‹ã‚ã§ã€ğŸ™‚
* ã€Œã“ã®ã‚¨ãƒ©ãƒ¼åˆ†é¡ï¼ˆå…¥åŠ›/ãƒ‰ãƒ¡ã‚¤ãƒ³/æ¨©é™/ã‚·ã‚¹ãƒ†ãƒ ï¼‰ã§ã€è¦‹è½ã¨ã—ãŒã¡ãªã‚±ãƒ¼ã‚¹ã‚ã‚‹ï¼Ÿã€ğŸ”âœ¨

---

## ã¾ã¨ã‚ğŸ§âœ¨

* ã‚¨ãƒ©ãƒ¼ã¯ **â€œä»•æ§˜â€** ã ã‚ˆğŸ“Œ
* **è¡¨ç¤ºç”¨** ã¨ **ãƒ­ã‚°ç”¨** ã‚’åˆ†ã‘ã‚‹ã¨è¨­è¨ˆãŒä¸€æ°—ã«ã‚­ãƒ¬ã‚¤ã«ãªã‚‹ğŸ«¶
* è‰¯ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€Œã‚„ã•ã—ã„è¨€è‘‰ã€ã€Œå…·ä½“çš„ã€ã€Œç›´ã—æ–¹ã€ğŸ’ªâœ¨ ([Nielsen Norman Group][3])
* APIãªã‚‰ **RFC 9457ï¼ˆProblem Detailsï¼‰** ãŒä»Šã®æ¨™æº–å¯„ã‚ŠğŸ“¦ğŸŒ ([datatracker.ietf.org][2])

---

æ¬¡ã®ç¬¬23ç« ã¯ã€ã“ã®ã‚¨ãƒ©ãƒ¼ãŸã¡ã‚’ **Resultå‹ï¼ˆOk/Errï¼‰ã§â€œä»•æ§˜ã¨ã—ã¦æ‰±ã†â€** æ–¹å‘ã«é€²ã‚€ã‚ˆã€œğŸ¯ğŸ“¦âœ¨

[1]: https://github.com/microsoft/typescript/releases "Releases Â· microsoft/TypeScript Â· GitHub"
[2]: https://datatracker.ietf.org/doc/rfc9457/?utm_source=chatgpt.com "RFC 9457 - Problem Details for HTTP APIs"
[3]: https://www.nngroup.com/articles/ten-usability-heuristics/?utm_source=chatgpt.com "10 Usability Heuristics for User Interface Design"
[4]: https://learn.microsoft.com/en-us/previous-versions/windows/desktop/bb226825%28v%3Dvs.85%29?utm_source=chatgpt.com "Messages: UI Text Guidelines"
[5]: https://developers.google.com/tech-writing/error-messages/format-for-readability?utm_source=chatgpt.com "Format error messages to enhance readability"
[6]: https://m1.material.io/patterns/errors.html?utm_source=chatgpt.com "Errors - Patterns"
[7]: https://qiita.com/horin0211/items/38ece47b8465763c25a7?utm_source=chatgpt.com "APIã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æ¨™æº–åŒ–ã™ã‚‹ - RFC9457ç§»è¡Œã§å¾—ã‚‰ã‚Œã‚‹5 ..."
[8]: https://www.npmjs.com/package/zod?utm_source=chatgpt.com "Zod"
