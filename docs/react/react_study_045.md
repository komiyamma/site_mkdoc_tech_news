# 第45章：条件付きレンダリング（`&&`, 三項演算子, `if`）

「ログインしていればログアウトボタンを、していなければログインボタンを表示したい」
「データがあればリストを、なければ『データなし』を表示したい」

こんなふうに、**条件によって表示するものを変える** ことを「条件付きレンダリング」と言います。
React開発で息をするように使うテクニックです 🌬️

---

## 1. 論理積演算子 `&&` （〜があるとき） ✅

「**ある条件が `true` のときだけ表示する**（falseなら何も出さない）」というパターンで一番使います。

```tsx
const [isLoggedIn, setIsLoggedIn] = useState(true);

return (
  <header>
    <h1>マイアプリ</h1>
    {/* ログインしている時だけ表示 */}
    {isLoggedIn && <p>ようこそ、ゲストさん！</p>}
  </header>
);
```

### ⚠️ 注意点：数値の `0` に気をつけろ！

`&&` は、左側が `0` だと、JavaScriptの仕様で `0` をそのまま表示してしまいます（Reactでは `0` はレンダリングされます）。

```tsx
const count = 0;
// 😱 「0」と表示されちゃう！
{count && <p>メッセージ {count} 件</p>}

// ⭕️ こう直す（条件をbooleanにする）
{count > 0 && <p>メッセージ {count} 件</p>}
```

---

## 2. 三項演算子 `? :` （AかBか） ⚖️

「**条件によってAかBか、どちらか一方を表示する**」パターンです。
`if ... else` の代わりとしてJSX内でよく使います。

```tsx
return (
  <div>
    {isLoggedIn ? (
      <button onClick={handleLogout}>ログアウト</button>
    ) : (
      <button onClick={handleLogin}>ログイン</button>
    )}
  </div>
);
```

ネスト（入れ子）しすぎると読みづらくなるので、
複雑な場合はコンポーネントを分けたり、変数に出すのがベターです 👍

---

## 3. 即時関数や変数で `if` を使う 📦

JSXの中では `if` 文は書けませんが、**returnの前** なら書けます。
条件によって表示内容がガラッと変わる場合は、この方法が読みやすいです。

```tsx
const UserPanel = ({ user }) => {
  // データがまだ無いときはローディングを出す（早期リターン）
  if (!user) {
    return <div>読み込み中... ⏳</div>;
  }

  // ここに来た時点で user はあることが確定 ✨
  return (
    <div>
      <h2>{user.name}</h2>
      <p>{user.bio}</p>
    </div>
  );
};
```

「早期リターン (Early Return)」と呼ばれるテクニックで、コードのネストが浅くなるのでおすすめです 🧹

---

## 4. `null` を返すと「何も表示しない」 👻

コンポーネントから `null` を返すと、DOMには何も描画されません。
「特定の条件ではコンポーネント自体を消したい」ときに使います。

```tsx
const ErrorMessage = ({ error }) => {
  if (!error) {
    return null; // エラーがないなら何も表示しない
  }

  return <div className="error">{error}</div>;
};
```

---

## 5. まとめ 🌟

* **`条件 && <UI />`**: 条件が true のときだけ表示（`0` に注意）。
* **`条件 ? <A /> : <B />`**: trueならA、falseならBを表示。
* **`if (!data) return ...`**: 早期リターンでローディングやエラー表示を切り分ける。
* **`return null`**: 何も表示したくないとき。

この3つ（`&&`, `? :`, `if`）を使いこなせれば、どんな複雑なUIも作れるようになります！
これでReactの基本（JSX、Props、State、リスト、条件分岐）は一通りコンプリートです 🎉

次は、これらを組み合わせて **もう少し実践的なコンポーネント** を作ってみたり、
**スタイル（CSS）の当て方** について学んでいきましょう 🎨